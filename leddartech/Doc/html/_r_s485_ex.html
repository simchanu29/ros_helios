<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>Leddar™ SDK: RS-485 Communication Demo</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="d-tec_04.ico"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">Leddar™ SDK
   &#160;<span id="projectnumber">2.10.0.92</span>
   </div>
   <div id="projectbrief">Programmer&#39;s interface to Leddar™ sensors</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">RS-485 Communication Demo </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="Introduction"></a>
Introduction</h1>
<p>This example is installed with the SDK but it does not use the LeddarC or <a class="el" href="namespace_leddar_n_e_t.html" title="Namespace containing all the definitions for the .NET interface of the Leddar™ SDK. ">LeddarNET</a> interfaces. It is a pure C program demontrating communication with the Leddar&trade; sensor via the RS-485 port using the MODBUS protocol. Under Windows the demo includes a VisualStudio project, and under Linux a Makefile is provided.</p>
<h1><a class="anchor" id="Usage"></a>
Usage</h1>
<p>Since an RS-485 port is not standard on a PC you will need an adapter to use the demo (for example a USB to RS-485 adapter).</p>
<p>Under Windows, when you install the Leddar&trade; SDK this demo is installed in the Examples solution. To use it simply open the solution with VisualStudio (2008 or later) and run the program. When prompted to enter the port name you will have to enter something like <code>COMx</code>, <code>x</code> being any number. You can use the RS-485 viewer window in Leddar&trade; Configuration to find out the port number attributed to your adapter.</p>
<p>Under Linux, the source files and Makefile are in the SDK/Rs485Demo directory. The Makefile is very simple and should work with any standard compiler and make utility. You can modify it to fit any special needs. The device name can depend on your distribution. Under Fedora 19 in our tests it was <code>ttyUSB0</code> (<code>/dev/</code> is automatically prepended by the demo). However note that the defaults access rights did not allow access to a normal user. So either the demo must be run under root access or a <code>chmod</code> must be performed to change the access rights. The default rights attributed to a USB adapter can be configured, see your Linux documentation.</p>
<h1><a class="anchor" id="Description"></a>
Description</h1>
<p>This project is a demonstration of communication with the sensor through the RS-485 port. It has a layered structure for clarity, it is not optimized for efficiency or maximum robustness. There a 4 layers:</p>
<ul>
<li>The OS layer (<code>OS.c</code> and <code>OS.h</code>) consisting of code that is OS dependant (opening the serial port and sending/receiving data, getting info from the keyboard). This is the only layer that has differences between the Windows and Linux code.</li>
<li>The MODBUS layer (<code>Modbus.c</code> and <code>Modbus.h</code>) that provides a simplistic implementation of the MODBUS protocol using the OS layer functions for access to the serial port.</li>
<li>The Leddar layer (<code>Leddar.c</code> and <code>Leddar.h</code>) that sits above the MODBUS layer and formats the command and interpret the results in the context of a Leddar&trade; sensor.</li>
<li>The driver layer (<code>Main.c</code>) that implements a simple text menu system to allow the user to control the sensor.</li>
</ul>
<p>Finally there are 2 header files containing definitions: <code>Definitions.h</code> and <code>UserDefs.h</code></p>
<p>Under Windows the only file you may have to modify is <code>UserDefs.h</code> to adjust the serial port parameters.</p>
<p>If you use Linux you may have to make some modifications if your distribution is not compatible with Fedora 19. The only files you should have to modify are <code>UserDefs.h</code>, <code>OS.h</code> and <code>OS.c</code>.</p>
<p>The communication parameters are set at 115200 bauds, no parity and 1 stop bit. You can modify them in the file <code>UserDefs.h</code>. However they must correspond to the sensor configuration for communication to work.</p>
<p>The code is documented and layed out for clarity and should be easy to understand for any C programmer. </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Apr 7 2014 15:36:01 for Leddar™ SDK by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.6
</small></address>
</body>
</html>
